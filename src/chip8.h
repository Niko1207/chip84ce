#ifndef CHIP8_H
#define CHIP8_H

#define CHIP8_FONTSIZE     5
#define CHIP8_KEYCOUNT     16
#define CHIP8_SCRHEIGHT    32
#define CHIP8_SCRWIDTH     64
#define CHIP8_SPRITEWIDTH  8
#define CHIP8_PROGRAMSTART 0x200

typedef signed char i8;
typedef unsigned char u8;

typedef signed short i16;
typedef unsigned short u16;

typedef signed long i32;
typedef unsigned long u32;

struct chip8
{
    u8 DT, ST, V[16], Kbd[16];
    u16 PC, SP, I, Stk[16];
    u8 FrmBuf[CHIP8_SCRHEIGHT][CHIP8_SCRWIDTH];
    u8 Mem[4096];
};

static const u8 chip8_font[16 * CHIP8_FONTSIZE] =
{
    0xF0, 0x90, 0x90, 0x90, 0xF0,
    0x20, 0x60, 0x20, 0x20, 0x70,
    0xF0, 0x10, 0xF0, 0x80, 0xF0,
    0xF0, 0x10, 0xF0, 0x10, 0xF0,
    0x90, 0x90, 0xF0, 0x10, 0x10,
    0xF0, 0x80, 0xF0, 0x10, 0xF0,
    0xF0, 0x80, 0xF0, 0x90, 0xF0,
    0xF0, 0x10, 0x20, 0x40, 0x40,
    0xF0, 0x90, 0xF0, 0x90, 0xF0,
    0xF0, 0x90, 0xF0, 0x10, 0xF0,
    0xF0, 0x90, 0xF0, 0x90, 0x90,
    0xE0, 0x90, 0xE0, 0x90, 0xE0,
    0xF0, 0x80, 0x80, 0x80, 0xF0,
    0xE0, 0x90, 0x90, 0x90, 0xE0,
    0xF0, 0x80, 0xF0, 0x80, 0xF0,
    0xF0, 0x80, 0xF0, 0x80, 0x80
};

bool chip8_exec(struct chip8 *);
bool chip8_init(struct chip8 *);

#endif
